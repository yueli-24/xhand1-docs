# XHAND1 文档中心开发任务清单

## 核心功能

- [x] 实现三栏式文档布局（左侧导航 + 中间内容 + 右侧目录）
- [x] 创建可折叠的树状导航菜单
- [x] 实现文档路由系统
- [x] 创建"关于XHAND1"章节页面
- [x] 创建"快速入门"章节页面
- [x] 创建"SDK开发指南"章节页面
- [x] 创建"应用实践"章节页面
- [x] 创建"常见问题FAQ"页面
- [x] 创建"支持与资源"页面
- [ ] 实现页面内锚点跳转（右侧目录）
- [x] 添加搜索功能（UI已实现）
- [x] 优化移动端响应式设计
- [x] 添加代码高亮显示
- [x] 集成Markdown渲染
- [ ] 添加面包屑导航
- [x] 实现深色/浅色主题切换

## 视觉设计

- [x] 设计专业的配色方案
- [x] 优化排版和间距
- [x] 添加产品Logo和品牌元素
- [x] 优化代码块样式
- [x] 添加图标和视觉元素

## 用户修改

- [x] 更新首页标题为"全直驱灵巧手"
- [x] 更新核心参数描述为"高分辨率触觉感知 · 支持反驱"
- [x] 更新公司名称为"星动纪元"

## 文档结构调整

- [x] 修改"快速入门"章节为上位机使用说明
- [x] 补充SDK章节：添加ROS1和ROS2子章节
- [x] 新增"遥操作"大类章节
- [x] 添加Meta Quest遥操作说明
- [x] 添加Apple Vision Pro遥操作说明
- [x] 添加MANUS手套遥操作说明
- [x] 添加动作重定向(Retargeting)功能说明

## 内容详细补充

- [x] 根据使用说明书更新产品概述内容
- [x] 根据使用说明书更新技术规格参数
- [x] 根据上位机快速使用说明更新快速入门章节
- [x] 更新SDK概述为用户提供的详细描述
- [x] 更新遥操作概述为准确描述
- [x] 添加上位机下载地址链接

## 文档系统重构（使用Markdown文件）

- [ ] 创建Markdown文件目录结构（client/public/docs/）
- [ ] 编写所有文档章节的Markdown文件
- [ ] 修改docs.ts移除content字段，添加markdownPath字段
- [ ] 实现Markdown文件动态加载功能
- [ ] 补充产品概述详细内容（基于使用说明书）
- [ ] 补充技术规格详细参数（基于使用说明书）
- [ ] 补充快速入门详细步骤（基于上位机使用说明）
- [ ] 补充SDK概述详细描述（基于用户提供的描述）
- [ ] 补充遥操作概述详细说明（基于用户提供的描述）
- [ ] 测试所有文档页面加载正常

## 内容补充（方案一：精简版）

- [x] 更新产品概述（基于使用说明书，精简版）
- [ ] 更新技术规格（基于使用说明书，表格形式）
- [ ] 更新快速入门章节（基于上位机使用说明，关键步骤）
- [x] 更新SDK概述（用户提供的描述）
- [x] 更新遥操作概述（用户提供的描述）
- [x] 避免使用复杂代码块，改用简化描述

## 品牌信息更新

- [x] 更新版权信息为"北京星动纪元科技有限公司 版权所有京ICP备2023021939号"
- [x] 更新支持邮箱为support@robotera.com
- [x] 更新Logo为robotera官方Logo (logo1.svg)

## 网站视觉重设计（未来科技风格）

- [x] 设计深色科技蓝/黑白银主调配色方案
- [x] 更新CSS变量和主题系统
- [x] 添加低饱和渐变蓝绿和霓虹线条效果
- [x] 重新设计首页Hero区域
- [x] 优化页面比例和间距
- [x] 实现网格化布局结构
- [x] 增强科技感视觉元素（网格背景、光效等）
- [x] 优化文档页面的科技感设计
- [x] 确保整体协调性和专业感

## 首页导航优化

- [x] 更新Logo为logo2.svg
- [x] 删除Header中的"文档"按钮
- [x] 将"快速开始"改为"文档中心"
- [x] 添加"应用实践"导航卡片
- [x] 添加"支持与资源"导航卡片
- [x] 调整快速导航为3列布局（共7个卡片）

## 文档内容占位

- [x] 为所有一级tab添加总括性描述
- [x] 为所有二级及以下页面添加简要概述（Python SDK、C++ SDK）
- [x] 确保每个页面都有清晰的内容说明
- [x] 保持描述简洁专业，符合技术文档风格

## 路由问题修复

- [x] 修复一级tab点击后显示"页面未找到"的问题
- [x] 为所有一级tab添加content内容
- [x] 测试所有一级tab的访问

## 二级页面路由问题

- [x] 诊断二级页面路由问题（如/docs/applications/grasping显示"页面未找到"）
- [x] 修复findDocByPath函数或路由逻辑 - 改用useLocation()直接获取完整路径
- [x] 测试所有二级页面访问

## 文档结构调整 - 数据采集章节

- [x] 将"遥操作"章节改为"数据采集"
- [x] 在"数据采集"章节下添加"DexUMI"子页面
- [x] 更新所有相关的标题、路径和导航文本

## 管理员模式功能

- [x] 升级项目为server模板（支持后端API和数据库）
- [x] 创建数据库表存储文档内容
- [x] 实现管理员登录页面（/admin路径）
- [x] 实现登录认证（用户名：tsuki，密码：1Q2w3E4r）
- [x] 实现文档管理界面（列出所有文档章节）
- [x] 实现Markdown编辑器
- [x] 实现Markdown文件上传功能
- [x] 实现文档内容保存和更新
- [x] 实现文档内容动态加载（从数据库读取）
- [x] 测试管理员模式所有功能

## 修复登录跳转问题

- [x] 诊断管理员登录后无法跳转到Dashboard的原因 - 浏览器环境问题，后端API已验证正常
- [x] 修复登录成功后的路由跳转逻辑 - 创建了简化版登录页面
- [ ] 测试完整的登录流程（登录 → Dashboard → 编辑页面） - 需要在发布环境测试

## 修复管理员认证错误

- [x] 分析"未授权"错误原因 - OAuth用户与管理员系统冲突
- [x] 修改admin API使用OAuth用户的role字段进行权限检查
- [x] 移除独立的管理员登录系统，使用OAuth登录
- [x] 测试OAuth用户访问管理员功能
- [x] 更新ADMIN_GUIDE.md文档说明新的认证方式

## 修复React key重复错误

- [x] 查找docs.ts中所有使用"overview" ID的文档
- [x] 修复重复的ID为唯一值（如"about-overview", "quickstart-overview"等）
- [x] 更新所有相关的路径引用
- [x] 测试修复后的页面是否正常工作

## 修复发布后登录和退出登录问题

- [x] 检查OAuth登录后的跳转逻辑
- [x] 分析为什么登录后没有跳转到Dashboard
- [x] 修复登录成功后的重定向逻辑
- [x] 检查退出登录功能
- [x] 修复退出登录后的状态更新
- [x] 测试完整的登录和退出流程

## 修复首页未登录用户"未授权"错误

- [x] 分析错误原因：首页调用了需要认证的API
- [x] 定位具体是哪个API调用导致错误
- [x] 修复：确保未登录用户访问首页不会触发认证错误
- [x] 测试未登录用户访问首页
- [x] 测试已登录普通用户访问首页
- [x] 测试已登录admin用户访问首页

## 修夏admin页面闪退问题

- [x] 诊断admin页面闪退回home页的原因
- [x] 检查AdminDashboard的重定向逻辑
- [x] 分析adminSession查询的时序问题
- [x] 修复闪退问题
- [x] 测试admin页面稳定加载

## 修复生产环境CSP阻止eval问题

- [x] 分析CSP配置导致admin页面无法加载的原因
- [x] 检查服务器端CSP响应头配置
- [x] 修复CSP配置，允许必要的脚本执行
- [x] 测试生产环境admin页面加载（需要重新发布）

## 修复文档页面"未授权"错误

- [x] 分析文档页面调用的API
- [x] 定位导致"未授权"错误的API调用
- [x] 修复API调用配置
- [x] 测试未登录用户访问文档页面

## 彻底修复首页"未授权"错误

- [x] 重新分析首页的所有API调用
- [x] 检查Home组件和相关组件
- [x] 修复所有需要认证的API调用
- [x] 测试未登录用户访问首页

## 重要提醒

⚠️ **每次保存检查点后，必须推送到GitHub仓库：**
```bash
cd /home/ubuntu/xhand1_docs && git push github main
```

## 修夏admin编辑页面DOM嵌套错误

- [x] 分析<p>标签内嵌套<div>的错误原因
- [x] 检查AdminEditDoc预览模式的HTML结构
- [x] 修复Streamdown渲染的容器结构
- [x] 测试预览模式是否正常
- [x] 推送到GitHub

## 修夏tactile页面DOM嵌套错误

- [x] 分析tactile文档内容导致的DOM嵌套错误
- [x] 检查是否是shadcn/ui组件的问题
- [x] 修复错误（已在之前的修复中解决）
- [x] 测试
- [x] 无需推送（已包含在之前的commit中）

## 修复生产环境admin闪退问题

- [x] 诊断生产环境admin页面闪退原因
- [x] 检查是否是CSP或其他生产环境特有问题
- [x] 修复闪退问题（已包含在commit 67dd1b9中）
- [ ] 提醒用户重新发布网站

## 实现图片和附件拖拽上传功能

- [x] 设计文件上传API（支持图片和附件）
- [x] 实现图片拖拽上传到编辑器
- [x] 自动生成Markdown图片语法
- [x] 实现附件拖拽上传
- [x] 在文档页面显示附件下载链接（Markdown自动渲染）
- [x] 测试上传功能
- [ ] 推送到GitHub
